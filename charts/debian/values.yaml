controllers:
  main:
    revisionHistoryLimit: 1
    containers:
      main:
        name: main
        image:
          repository: debian
          tag: stable-slim
          pullPolicy: IfNotPresent
        command: ["/usr/bin/sleep", "infinity"]
        env:
          TZ: "Europe/Amsterdam"
        probes:
          liveness:
            enabled: true
            type: TCP
            port: 2222
          readiness:
            enabled: true
            type: TCP
            port: 2222
          startup:
            enabled: true
            spec:
              failureThreshold: 60
              periodSeconds: 1
        resources:
          requests:
            memory: "256Mi"
            cpu: "500m"
          limits:
            memory: "512Mi"
            cpu: "1000m"
        lifecycle:
          postStart:
            exec:
              command:
                [
                  "/bin/sh",
                  "-c",
                  "/custom-scripts/install-packages.bash &> /tmp/custom-scripts.log",
                ]
          preStop:
            exec:
              command: ["/bin/sh", "-c", "kill 1"]
service:
  main:
    controller: main
    type: LoadBalancer
    annotations:
      lbipam.cilium.io/ips: "192.168.1.83"
    ports:
      ssh:
        enabled: true
        port: 2222
        targetPort: 2222

persistence:
  run:
    enabled: true
    type: emptyDir
    medium: Memory
  tmp:
    enabled: true
    type: emptyDir
  custom-scripts:
    enabled: true
    type: configMap
    name: customscripts
    defaultMode: 0755
  home:
    enabled: true
    type: persistentVolumeClaim
    existingClaim: debian-home-pvc

packages:
  - joe
  - rsync
  - nmap
  - tcpdump
  - net-tools
  - iputils-ping
  - telnet
  - psmisc

sshkeys:
  - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+MieaK3sDbRvB/hxS5z/wLIaHv2MI9HywLLBpjoHs99657LMFoCO5OqF48OOjAGaNenzUilp2d84Y4LfKo2EeaQ/sQpil1xSEY5z9nIcPKauJ2ydJb90mHQcyuqHa3pkXe0R+frCYCDOz/lwNTXXeljlDJW0pf02J7KKpHIcCoSCdKoPv35DswemRycAuQ+5injAX4yHhpEr314553DTT3ShvQllnCubxkTl/lAWvrt7z4yeCii2iikxtXUUAQPqbl/eyU+VhAEH49kbL/oJ9FXC6nBd5UvRzZhGCPp/XZQJR63t8tc3MiKJA58gA6pukVik9p+4pknorPogGaqQAycO/1Tj3AYRHWZhZTF4Ey3jIzamz9T4JYh8ucmCBorM3ikSnWGk+h5+FQPcGpiyrxDKoWAwsW8/3pRYmbmqoRW1MCxrqSNBmDgw/uCPzUmD9XNr78ctLZpPImpH/tuH4p+neE7KBCzBSV/4DCsvEWZT+qEheWwC1Ie5Pzua62lk= bhuism@eva
