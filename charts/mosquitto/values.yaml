controllers:
  main:
    strategy: Recreate
    containers:
      main:
        image:
          repository: eclipse-mosquitto
          tag: 2.0.18
          pullPolicy: IfNotPresent
        probes:
          liveness:
            enabled: true
          readiness:
            enabled: true
          startup:
            enabled: true
service:
  main:
    ports:
      http:
        port: 1883
      websocket:
        enabled: true
        port: 8083

ingress:
  main:
    enabled: false
    hosts:
      - host: mosquitto.impl.nl
        paths:
          - path: /
            pathType: Prefix
            service:
              name: mqtt
              port: 1883
          - path: /
            pathType: Prefix
            service:
              name: ws
              port: 8083
persistence:
  configinc:
    enabled: true
    type: persistentVolumeClaim
    accessMode: ReadWriteOnce
    existingClaim: mosquitto-inc-pvc
    mountPath: /mosquitto/configinc
  data:
    enabled: true
    type: persistentVolumeClaim
    accessMode: ReadWriteOnce
    existingClaim: mosquitto-data-pvc
    mountPath: /mosquitto/data
  config:
    enabled: true
    type: configMap
    name: mosquitto-config
    mountPath: /mosquitto/config/mosquitto.conf
    subPath: /mosquitto.conf
